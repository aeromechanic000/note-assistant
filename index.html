<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Security-Policy" content="
    default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com;
    connect-src 'self' https://text.pollinations.ai https://image.pollinations.ai https://pollinations.ai;
    frame-src 'self' https://www.youtube.com https://trytako.com;
    child-src 'self';
    manifest-src 'self';
    worker-src 'self';
    upgrade-insecure-requests;
    block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Note Assistant by Minecraft AI</title>
    <link rel="icon" type="image/x-icon" href="icon.png">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #6d9dc5 0%, #8fbc8f 100%);
            display: flex;
            flex-direction: column;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            min-height: 100vh;
        }

        .toolbar {
            background: linear-gradient(135deg, #4a4a4a 0%, #2d2d2d 100%);
            padding: 15px 20px;
            border-bottom: 3px solid #8b4513;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            z-index: 10;
            flex-shrink: 0;
        }
        
        .title-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .toolbar h1 {
            font-size: 20px;
            color: #ffffff;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            font-family: 'Courier New', monospace;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .minecraft-decoration {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .minecraft-block {
            width: 20px;
            height: 20px;
            border: 2px solid #000;
            position: relative;
            image-rendering: pixelated;
        }

        .block-dirt {
            background: linear-gradient(45deg, #8b4513 25%, #a0522d 25%, #a0522d 50%, #8b4513 50%, #8b4513 75%, #a0522d 75%);
            background-size: 4px 4px;
        }

        .block-grass {
            background: linear-gradient(to bottom, #9acd32 0%, #9acd32 30%, #8b4513 30%, #8b4513 70%, #a0522d 70%);
        }

        .block-stone {
            background: linear-gradient(45deg, #696969 25%, #808080 25%, #808080 50%, #696969 50%, #696969 75%, #808080 75%);
            background-size: 3px 3px;
        }

        .social-links {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 140px;
            gap: 6px;
            color: #1da1f2;
            text-decoration: none;
            font-size: 10px;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 4px;
            border: 2px solid #1da1f2;
            transition: all 0.2s;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(5px);
            white-space: nowrap;
        }

        .social-link:hover {
            background: #1da1f2;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(29, 161, 242, 0.4);
        }

        .social-icon {
            width: 12px;
            height: 12px;
            fill: currentColor;
            flex-shrink: 0;
        }

        .main-content {
            flex: 1;
            display: flex;
            background: linear-gradient(45deg, #e8f4f8 25%, #f0f8ff 25%, #f0f8ff 50%, #e8f4f8 50%, #e8f4f8 75%, #f0f8ff 75%);
            background-size: 20px 20px;
            border-left: 3px solid #8b4513;
            border-right: 3px solid #8b4513;
            min-height: 0;
            overflow: hidden;
            gap: 3px;
        }

        .column {
            flex: 1;
            padding: 20px;
            background: rgba(255,255,255,0.9);
            overflow-y: auto;
            height: 100%;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            border: 3px solid #8b4513;
        }

        .column:first-child {
            border-left: none;
        }

        .column:last-child {
            border-right: none;
        }

        .column-title {
            font-size: 18px;
            font-weight: bold;
            color: #4a4a4a;
            margin-bottom: 20px;
            text-shadow: 1px 1px 0 rgba(255,255,255,0.5);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .operation-bar {
            background: rgba(255,255,255,0.7);
            border: 3px solid #8b4513;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
        }

        .btn {
            padding: 8px 12px;
            border: 2px solid #8b4513;
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 11px;
            font-weight: 600;
            color: #2a2a2a;
            text-shadow: 1px 1px 0 rgba(255,255,255,0.2);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            font-family: 'Courier New', monospace;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn:hover {
            background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
            transform: translateY(-1px);
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn.import {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
            border-color: #e65100;
        }

        .btn.process {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border-color: #2e7d32;
        }

        .btn.export {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            border-color: #0D47A1;
        }

        .btn.translate {
            background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
            color: white;
            border-color: #4A148C;
        }

        .btn.demo {
            background: linear-gradient(135deg, #FF5722 0%, #E64A19 100%);
            color: white;
            border-color: #BF360C;
        }

        .mode-switch {
            display: flex;
            border: 2px solid #8b4513;
            border-radius: 4px;
            overflow: hidden;
        }

        .mode-option {
            padding: 8px 12px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 11px;
            font-weight: 600;
            color: #2a2a2a;
            font-family: 'Courier New', monospace;
            border: none;
            border-right: 1px solid #8b4513;
        }

        .mode-option:last-child {
            border-right: none;
        }

        .mode-option.active {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
        }

        .language-selector {
            padding: 8px 12px;
            border: 2px solid #8b4513;
            border-radius: 4px;
            font-size: 11px;
            font-family: 'Courier New', monospace;
            background: white;
            color: #2a2a2a;
            min-width: 150px;
        }

        .text-area {
            flex: 1;
            width: 100%;
            border: 3px solid #8b4513;
            border-radius: 6px;
            padding: 15px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            background: rgba(255,255,255,0.9);
            resize: none;
            min-height: 400px;
        }

        .text-area:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        .text-area.readonly {
            background: rgba(240,248,255,0.9);
            cursor: default;
        }

        .preview-container {
            flex: 1;
            width: 100%;
            border: 3px solid #8b4513;
            border-radius: 6px;
            padding: 15px;
            font-size: 14px;
            background: rgba(255,255,255,0.9);
            overflow-y: auto;
            min-height: 400px;
        }

        .view-toggle {
            display: flex;
            border: 2px solid #8b4513;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .view-option {
            padding: 6px 10px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 10px;
            font-weight: 600;
            color: #2a2a2a;
            font-family: 'Courier New', monospace;
            border: none;
            border-right: 1px solid #8b4513;
            flex: 1;
            text-align: center;
        }

        .view-option:last-child {
            border-right: none;
        }

        .view-option.active {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .markdown-content {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .markdown-content h1 {
            font-size: 1.8em;
            font-weight: bold;
            margin: 1em 0 0.5em 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.3em;
        }

        .markdown-content h2 {
            font-size: 1.5em;
            font-weight: bold;
            margin: 0.8em 0 0.4em 0;
            color: #34495e;
            border-bottom: 1px solid #bdc3c7;
            padding-bottom: 0.2em;
        }

        .markdown-content h3 {
            font-size: 1.3em;
            font-weight: bold;
            margin: 0.6em 0 0.3em 0;
            color: #2c3e50;
        }

        .markdown-content h4, .markdown-content h5, .markdown-content h6 {
            font-size: 1.1em;
            font-weight: bold;
            margin: 0.5em 0 0.2em 0;
            color: #2c3e50;
        }

        .markdown-content p {
            margin: 0.5em 0;
        }

        .markdown-content ul, .markdown-content ol {
            margin: 0.5em 0;
            padding-left: 2em;
        }

        .markdown-content li {
            margin: 0.2em 0;
        }

        .markdown-content strong {
            font-weight: bold;
            color: #2c3e50;
        }

        .markdown-content em {
            font-style: italic;
            color: #7f8c8d;
        }

        .markdown-content code {
            background: #f8f9fa;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #e74c3c;
        }

        .markdown-content pre {
            background: #f8f9fa;
            padding: 1em;
            border-radius: 5px;
            overflow-x: auto;
            margin: 1em 0;
        }

        .markdown-content blockquote {
            border-left: 4px solid #3498db;
            margin: 1em 0;
            padding-left: 1em;
            color: #7f8c8d;
            font-style: italic;
        }

        .hidden-file-input {
            display: none;
        }

        .status-bar {
            background: linear-gradient(135deg, #4a4a4a 0%, #2d2d2d 100%);
            padding: 12px 20px;
            font-size: 12px;
            color: #ffffff;
            border-top: 3px solid #8b4513;
            font-family: 'Courier New', monospace;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.5);
            z-index: 10;
            min-height: 50px;
            flex-shrink: 0;
            border-left: 3px solid #8b4513;
            border-right: 3px solid #8b4513;
            border-bottom: 3px solid #8b4513;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .loading::after {
            content: '🔄';
            animation: spin 1s linear infinite;
            margin-left: 5px;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 1200px) {
            .main-content {
                flex-direction: column;
            }
            
            .column {
                min-height: 300px;
                border-left: 3px solid #8b4513;
                border-right: 3px solid #8b4513;
            }
            
            .social-link {
                min-width: 120px;
                font-size: 9px;
                padding: 4px 8px;
            }
        }

        @media (max-width: 768px) {
            .title-bar {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }
            
            .social-links {
                justify-content: center;
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .operation-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .btn {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="toolbar">
            <div class="title-bar">
                <h1>
                    🎙️ Voice Note AI Processor
                    <div class="minecraft-decoration">
                        <div class="minecraft-block block-grass"></div>
                        <div class="minecraft-block block-dirt"></div>
                        <div class="minecraft-block block-stone"></div>
                    </div>
                </h1>
                <div class="social-links">
                    <a href="https://discord.gg/RKjspnTBmb" target="_blank" rel="noopener noreferrer" class="social-link">
                        <svg class="social-icon" viewBox="0 0 24 24">
                            <path d="M19.952,5.672c-1.904-1.531-4.916-1.79-5.044-1.801c-0.201-0.017-0.392,0.097-0.474,0.281 c-0.006,0.012-0.072,0.163-0.145,0.398c1.259,0.212,2.806,0.64,4.206,1.509c0.224,0.139,0.293,0.434,0.154,0.659 c-0.09,0.146-0.247,0.226-0.407,0.226c-0.086,0-0.173-0.023-0.252-0.072C15.584,5.38,12.578,5.305,12,5.305S8.415,5.38,6.011,6.872 c-0.225,0.14-0.519,0.07-0.659-0.154c-0.14-0.225-0.07-0.519,0.154-0.659c1.4-0.868,2.946-1.297,4.206-1.509 c-0.074-0.236-0.14-0.386-0.145-0.398C9.484,3.968,9.294,3.852,9.092,3.872c-0.127,0.01-3.139,0.269-5.069,1.822 C3.015,6.625,1,12.073,1,16.783c0,0.083,0.022,0.165,0.063,0.237c1.391,2.443,5.185,3.083,6.05,3.111c0.005,0,0.01,0,0.015,0 c0.153,0,0.297-0.073,0.387-0.197l0.875-1.202c-2.359-0.61-3.564-1.645-3.634-1.706c-0.198-0.175-0.217-0.477-0.042-0.675 c0.175-0.198,0.476-0.217,0.674-0.043c0.029,0.026,2.248,1.909,6.612,1.909c4.372,0,6.591-1.891,6.613-1.91 c0.198-0.172,0.5-0.154,0.674,0.045c0.174,0.198,0.155,0.499-0.042,0.673c-0.07,0.062-1.275,1.096-3.634,1.706l0.875,1.202 c0.09,0.124,0.234,0.197,0.387,0.197c0.005,0,0.01,0,0.015,0c0.865-0.027,4.659-0.667,6.05-3.111 C22.978,16.947,23,16.866,23,16.783C23,12.073,20.985,6.625,19.952,5.672z M8.891,14.87c-0.924,0-1.674-0.857-1.674-1.913 s0.749-1.913,1.674-1.913s1.674,0.857,1.674,1.913S9.816,14.87,8.891,14.87z M15.109,14.87c-0.924,0-1.674-0.857-1.674-1.913 s0.749-1.913,1.674-1.913c0.924,0,1.674,0.857,1.674,1.913S16.033,14.87,15.109,14.87z"></path>
                        </svg>
                        Discord Server
                    </a>
                    <a href="https://github.com/aeromechanic000/note-assistant" target="_blank" rel="noopener noreferrer" class="social-link">
                        <svg class="social-icon" viewBox="0 0 24 24">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path>
                        </svg>
                        GitHub Repository 
                    </a>
                    <a href="https://x.com/aeromechan71402" target="_blank" rel="noopener noreferrer" class="social-link">
                        <svg class="social-icon" viewBox="0 0 24 24">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
                        </svg>
                        @aeromechan71402
                    </a>
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <!-- Input Column -->
            <div class="column">
                <div class="column-title">📝 Input Content</div>
                
                <div class="operation-bar">
                    <input type="file" id="import-file" accept=".txt,.md" class="hidden-file-input">
                    <button onclick="document.getElementById('import-file').click()" class="btn import">
                        📂 Import File
                    </button>
                    <button onclick="clearInput()" class="btn">
                        🗑️ Clear
                    </button>
                    <button onclick="pasteFromClipboard()" class="btn">
                        📋 Paste
                    </button>
                    <button onclick="loadDemoContent()" class="btn demo">
                        🎯 Demo
                    </button>
                </div>
                
                <textarea id="input-text" class="text-area" placeholder="Paste your voice-converted notes here or import from a text file...

Example:
- the meeteng was abot the new proect
- we diskused budjet and timelne
- john sed he wil finsh the desing by fridy
- sara agred to revew the code
- next meeteng is nextt week"></textarea>
            </div>
            
            <!-- Processing Column -->
            <div class="column">
                <div class="column-title">🤖 AI Processing</div>
                
                <div class="operation-bar">
                    <div class="mode-switch">
                        <button class="mode-option active" data-mode="clean" onclick="setProcessingMode('clean')">
                            ✨ Clean Note
                        </button>
                        <button class="mode-option" data-mode="summary" onclick="setProcessingMode('summary')">
                            📋 Summary
                        </button>
                    </div>
                    <button onclick="processContent()" class="btn process" id="process-btn">
                        🚀 Process
                    </button>
                    <button onclick="exportProcessed()" class="btn export">
                        💾 Export MD
                    </button>
                </div>

                <div class="view-toggle">
                    <button class="view-option active" onclick="setProcessedView('preview')">👁️ Preview</button>
                    <button class="view-option" onclick="setProcessedView('raw')">📝 Raw</button>
                </div>
                
                <textarea id="processed-text" class="text-area readonly hidden" readonly="" placeholder="Processed content will appear here..."></textarea>
                <div id="processed-preview" class="preview-container markdown-content">
                    <p style="color: #7f8c8d; font-style: italic;">Processed content will appear here...</p>
                </div>
            </div>
            
            <!-- Translation Column -->
            <div class="column">
                <div class="column-title">🌐 Translation</div>
                
                <div class="operation-bar">
                    <select id="target-language" class="language-selector">
                        <option value="English">🇺🇸 English</option>
                        <option value="Spanish">🇪🇸 Spanish</option>
                        <option value="Chinese">🇨🇳 Chinese (Mandarin)</option>
                        <option value="French">🇫🇷 French</option>
                        <option value="German">🇩🇪 German</option>
                        <option value="Japanese">🇯🇵 Japanese</option>
                        <option value="Portuguese">🇵🇹 Portuguese</option>
                        <option value="Russian">🇷🇺 Russian</option>
                        <option value="Italian">🇮🇹 Italian</option>
                        <option value="Korean">🇰🇷 Korean</option>
                        <option value="Arabic">🇸🇦 Arabic</option>
                        <option value="Hindi">🇮🇳 Hindi</option>
                        <option value="Dutch">🇳🇱 Dutch</option>
                        <option value="Turkish">🇹🇷 Turkish</option>
                        <option value="Swedish">🇸🇪 Swedish</option>
                        <option value="Polish">🇵🇱 Polish</option>
                        <option value="Norwegian">🇳🇴 Norwegian</option>
                        <option value="Danish">🇩🇰 Danish</option>
                        <option value="Finnish">🇫🇮 Finnish</option>
                        <option value="Czech">🇨🇿 Czech</option>
                        <option value="Greek">🇬🇷 Greek</option>
                        <option value="Hebrew">🇮🇱 Hebrew</option>
                        <option value="Thai">🇹🇭 Thai</option>
                        <option value="Vietnamese">🇻🇳 Vietnamese</option>
                        <option value="Indonesian">🇮🇩 Indonesian</option>
                        <option value="Malay">🇲🇾 Malay</option>
                        <option value="Ukrainian">🇺🇦 Ukrainian</option>
                        <option value="Bulgarian">🇧🇬 Bulgarian</option>
                        <option value="Romanian">🇷🇴 Romanian</option>
                        <option value="Hungarian">🇭🇺 Hungarian</option>
                        <option value="Croatian">🇭🇷 Croatian</option>
                        <option value="Slovak">🇸🇰 Slovak</option>
                        <option value="Estonian">🇪🇪 Estonian</option>
                        <option value="Latvian">🇱🇻 Latvian</option>
                        <option value="Lithuanian">🇱🇹 Lithuanian</option>
                        <option value="Slovenian">🇸🇮 Slovenian</option>
                    </select>
                    <button onclick="translateContent()" class="btn translate" id="translate-btn">
                        🔄 Translate
                    </button>
                    <button onclick="exportTranslation()" class="btn export">
                        💾 Export MD
                    </button>
                </div>

                <div class="view-toggle">
                    <button class="view-option active" onclick="setTranslationView('preview')">👁️ Preview</button>
                    <button class="view-option " onclick="setTranslationView('raw')">📝 Raw</button>
                </div>
                
                <textarea id="translated-text" class="text-area readonly hidden" readonly="" placeholder="Translation will appear here..."></textarea>
                <div id="translated-preview" class="preview-container markdown-content"></div>
            </div>
        </div>
        
        <div class="status-bar">
            <div id="status-text">🎙️ Voice Note AI Processor ready - Powered by Pollinations AI!</div>
            <div id="api-status">API: Pollinations AI</div>
        </div>
    </div>

    <script>
        // Global variables
        let currentProcessingMode = 'clean';
        let processedViewMode = 'preview'; // Changed default to preview
        let translationViewMode = 'raw';
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateStatus('Voice Note AI Processor loaded - Powered by Pollinations AI!');
            loadDemoContent();
        });

        function setupEventListeners() {
            // File import
            document.getElementById('import-file').addEventListener('change', importFile);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', handleKeyboard);
        }

        function handleKeyboard(event) {
            if (event.ctrlKey || event.metaKey) {
                switch (event.key) {
                    case 'v':
                        if (event.target.id !== 'input-text') {
                            event.preventDefault();
                            pasteFromClipboard();
                        }
                        break;
                    case 'Enter':
                        event.preventDefault();
                        processContent();
                        break;
                }
            }
        }

        // Input functions
        function importFile(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('input-text').value = e.target.result;
                updateStatus(`File imported: ${file.name}`);
            };
            reader.readAsText(file);
            e.target.value = '';
        }

        function clearInput() {
            if (confirm('Clear the input content?')) {
                document.getElementById('input-text').value = '';
                updateStatus('Input cleared');
            }
        }

        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('input-text').value = text;
                updateStatus('Content pasted from clipboard');
            } catch (err) {
                updateStatus('Unable to access clipboard - please paste manually');
            }
        }

        function loadDemoContent() {
            document.getElementById('input-text').value = `the meeteng was abot the new proect discusion
- we talkd abot the budjet wich is abot 50k dolars
- timelne is 3 monts for compleshon  
- john sed he wil finsh the desing mockps by fridy
- sara agred to revew the frntend code and giv fedbak
- we ned to hire 2 mor devlopers for bakend work
- testng fase shud start in 2nd mont
- we discused martketng stratgy breifly
- launh dat is tentatvly set for end of q3
- next meeteng is schedld for nextt week tusday at 2pm
- we shud also considr the testng fase befor launh`;
            updateStatus('Demo content loaded - try processing it!');
        }

        // Processing mode functions
        function setProcessingMode(mode) {
            currentProcessingMode = mode;
            
            document.querySelectorAll('.mode-option').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            
            updateStatus(`Processing mode set to: ${mode === 'clean' ? 'Clean Note' : 'Note Summary'}`);
        }

        // View toggle functions
        function setProcessedView(view) {
            processedViewMode = view;
            const rawArea = document.getElementById('processed-text');
            const previewArea = document.getElementById('processed-preview');
            const buttons = document.querySelectorAll('.column:nth-child(2) .view-option');
            
            buttons.forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.column:nth-child(2) .view-option:${view === 'preview' ? 'first' : 'last'}-child`).classList.add('active');
            
            if (view === 'raw') {
                rawArea.classList.remove('hidden');
                previewArea.classList.add('hidden');
            } else {
                rawArea.classList.add('hidden');
                previewArea.classList.remove('hidden');
                updateProcessedPreview();
            }
        }

        function setTranslationView(view) {
            translationViewMode = view;
            const rawArea = document.getElementById('translated-text');
            const previewArea = document.getElementById('translated-preview');
            const buttons = document.querySelectorAll('.column:nth-child(3) .view-option');
            
            buttons.forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.column:nth-child(3) .view-option:${view === 'preview' ? 'first' : 'last'}-child`).classList.add('active');
            
            if (view === 'raw') {
                rawArea.classList.remove('hidden');
                previewArea.classList.add('hidden');
            } else {
                rawArea.classList.add('hidden');
                previewArea.classList.remove('hidden');
                updateTranslationPreview();
            }
        }

        function updateProcessedPreview() {
            const content = document.getElementById('processed-text').value;
            const previewArea = document.getElementById('processed-preview');
            if (content.trim()) {
                previewArea.innerHTML = marked.parse(content);
            } else {
                previewArea.innerHTML = '<p style="color: #7f8c8d; font-style: italic;">Processed content will appear here...</p>';
            }
        }

        function updateTranslationPreview() {
            const content = document.getElementById('translated-text').value;
            const previewArea = document.getElementById('translated-preview');
            if (content.trim()) {
                previewArea.innerHTML = marked.parse(content);
            } else {
                previewArea.innerHTML = '<p style="color: #7f8c8d; font-style: italic;">Translation will appear here...</p>';
            }
        }

        // AI Processing functions using Pollinations AI
        async function processContent() {
            const inputText = document.getElementById('input-text').value.trim();
            
            if (!inputText) {
                updateStatus('Please enter some content to process');
                return;
            }

            const processBtn = document.getElementById('process-btn');
            processBtn.classList.add('loading');
            processBtn.disabled = true;

            try {
                let prompt;
                if (currentProcessingMode === 'clean') {
                    prompt = `You are a professional note-taking assistant. Please clean up and properly format this voice-converted note while preserving ALL information and details. Your task is to:

1. Fix spelling errors, grammar issues, and typos
2. Improve sentence structure and clarity
3. Organize content with proper markdown formatting (headers, bullet points, etc.)
4. Preserve ALL original information - do not remove or summarize any details
5. Maintain the chronological order and context
6. Add appropriate sections/headers to organize the content better
7. Ensure all names, dates, numbers, and specific details are retained accurately

Important: This is for CLEANING/FORMATTING only, NOT summarizing. Keep every piece of information from the original text.

Voice-converted note to clean:
${inputText}`;
                } else {
                    prompt = `You are a professional meeting summarizer. Please create a concise, hierarchical summary of this voice-converted note. Your task is to:

1. Extract and organize the KEY POINTS only
2. Create a structured summary with clear sections
3. Use markdown formatting with headers and bullet points
4. Group related topics together
5. Highlight important decisions, action items, and deadlines
6. Remove redundant or minor details
7. Present information in a logical flow

Note: This is for SUMMARIZING - condense the content while keeping essential information.

Voice-converted note to summarize:
${inputText}`;
                }

                const response = await fetch(`https://text.pollinations.ai/${encodeURIComponent(prompt)}`);
                const textResponse = await response.text();

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                document.getElementById('processed-text').value = textResponse;
                updateProcessedPreview();
                updateStatus(`Content ${currentProcessingMode === 'clean' ? 'cleaned' : 'summarized'} successfully using Pollinations AI!`);
                
            } catch (error) {
                console.error('Processing error:', error);
                updateStatus(`Error: ${error.message}`);
            } finally {
                processBtn.classList.remove('loading');
                processBtn.disabled = false;
            }
        }

        // Translation functions using Pollinations AI
        async function translateContent() {
            const processedText = document.getElementById('processed-text').value.trim();
            const targetLanguage = document.getElementById('target-language').value;
            
            if (!processedText) {
                updateStatus('Please process some content first before translating');
                return;
            }

            const translateBtn = document.getElementById('translate-btn');
            translateBtn.classList.add('loading');
            translateBtn.disabled = true;

            try {
                const prompt = `Please translate the following text to ${targetLanguage}. Maintain the same markdown formatting and structure. If the text is already in ${targetLanguage}, please improve the grammar and formatting instead:\n\n${processedText}`;

                const response = await fetch(`https://text.pollinations.ai/${encodeURIComponent(prompt)}`);
                const textResponse = await response.text();

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                document.getElementById('translated-text').value = textResponse;
                updateTranslationPreview();
                updateStatus(`Content translated to ${targetLanguage} successfully using Pollinations AI!`);
                
            } catch (error) {
                console.error('Translation error:', error);
                updateStatus(`Error: ${error.message}`);
            } finally {
                translateBtn.classList.remove('loading');
                translateBtn.disabled = false;
            }
        }

        // Export functions
        function exportProcessed() {
            const content = document.getElementById('processed-text').value;
            
            if (!content.trim()) {
                updateStatus('No processed content to export');
                return;
            }

            const filename = `processed_note_${currentProcessingMode}_${getCurrentTimestamp()}.md`;
            downloadAsFile(content, filename);
            updateStatus(`Processed content exported as ${filename}`);
        }

        function exportTranslation() {
            const content = document.getElementById('translated-text').value;
            const targetLanguage = document.getElementById('target-language').value;
            
            if (!content.trim()) {
                updateStatus('No translation to export');
                return;
            }

            const filename = `translation_${targetLanguage.toLowerCase()}_${getCurrentTimestamp()}.md`;
            downloadAsFile(content, filename);
            updateStatus(`Translation exported as ${filename}`);
        }

        // Utility functions
        function downloadAsFile(content, filename) {
            const blob = new Blob([content], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            link.click();
            URL.revokeObjectURL(url);
        }

        function getCurrentTimestamp() {
            const now = new Date();
            return now.toISOString().slice(0, 19).replace(/[:-]/g, '').replace('T', '_');
        }

        function updateStatus(message) {
            document.getElementById('status-text').textContent = message;
        }

        console.log('🎙️ Voice Note AI Processor loaded successfully with Pollinations AI!');
    </script>



</body></html>